{
    "sourceFile": "User/Findback.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1680476679809,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1680476679809,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\n<html style=\"font-size: 16px;\" lang=\"en\">\n\n<head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta charset=\"utf-8\">\n    <meta name=\"keywords\" content=\"Findback\">\n    <meta name=\"description\" content=\"Find password back\">\n    <title>Register</title>\n    <link rel=\"stylesheet\" href=\"../css/nicepage.css\" media=\"screen\">\n    <link rel=\"stylesheet\" href=\"../css/Register.css\" media=\"screen\">\n    <script class=\"u-script\" type=\"text/javascript\" src=\"../js/jquery.js\" defer=\"\"></script>\n    <script class=\"u-script\" type=\"text/javascript\" src=\"../js/nicepage.js\" defer=\"\"></script>\n    <link id=\"u-theme-google-font\" rel=\"stylesheet\"\n        href=\"https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i\">\n        <script type=\"application/ld+json\">\n    {\n      \"@context\": \"http://schema.org\",\n      \"@type\": \"Organization\",\n      \"name\": \"OMS_v1\",\n      \"logo\": \"../logo.png\"\n    }\n  </script>\n  <meta name=\"theme-color\" content=\"#93bfcb\">\n  <meta property=\"og:title\" content=\"Find back\">\n  <meta property=\"og:description\" content=\"\">\n  <meta property=\"og:type\" content=\"website\">\n  <meta data-intl-tel-input-cdn-path=\"intlTelInput/\">\n</head>\n<script>\n    mobiscroll.datepicker('#mobi-picker', {\n        controls: ['date'],\n        touchUi: true\n    });\n</script>\n\n<body class=\"u-body u-xl-mode\" data-lang=\"en\">\n    <header class=\"u-header\" id=\"sec-b883\" data-animation-name=\"\" data-animation-duration=\"0\" data-animation-delay=\"0\"\n        data-animation-direction=\"\">\n        <div class=\"u-clearfix u-sheet u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-sheet-1\">\n            <nav class=\"u-hidden-lg u-hidden-xl u-menu u-menu-one-level u-offcanvas u-menu-1\">\n                <div class=\"menu-collapse\" style=\"font-size: 1.875rem; font-weight: 700; letter-spacing: 0px;\">\n                    <a class=\"u-button-style u-custom-border u-custom-border-color u-custom-borders u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-text-active-color u-custom-text-color u-custom-text-hover-color u-custom-top-bottom-menu-spacing u-nav-link\"\n                        href=\"#\" style=\"font-size: calc(1em + 18px); padding: 9px 8px;\">\n                        <svg class=\"u-svg-link\" viewBox=\"0 0 24 24\">\n                            <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#svg-2bcb\"></use>\n                        </svg>\n                        <svg class=\"u-svg-content\" version=\"1.1\" id=\"svg-2bcb\" viewBox=\"0 0 16 16\" x=\"0px\" y=\"0px\"\n                            xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <g>\n                                <rect y=\"1\" width=\"16\" height=\"2\"></rect>\n                                <rect y=\"7\" width=\"16\" height=\"2\"></rect>\n                                <rect y=\"13\" width=\"16\" height=\"2\"></rect>\n                            </g>\n                        </svg>\n                    </a>\n                </div>\n                <div class=\"u-custom-menu u-nav-container\">\n                    <ul class=\"u-nav u-spacing-20 u-unstyled u-nav-1\">\n                        <li class=\"u-nav-item\"><a\n                                class=\"u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-palette-2-base\"\n                                href=\"../index.php\" style=\"padding: 10px;\">Home</a>\n                        </li>\n                        <li class=\"u-nav-item\"><a\n                                class=\"u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-palette-2-base\"\n                                href=\"./Appointment.php\" style=\"padding: 10px;\">Appointment</a>\n                        </li>\n                        <li class=\"u-nav-item\"><a\n                                class=\"u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-palette-2-base\"\n                                href=\"./Schedule.php\" style=\"padding: 10px;\">Schedule</a>\n                        </li>\n                        <li class=\"u-nav-item\"><a\n                                class=\"u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-palette-2-base\"\n                                href=\"./Log-in.php\" style=\"padding: 10px;\">Log in</a>\n                        </li>\n                        <li class=\"u-nav-item\"><a\n                                class=\"u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-palette-2-base\"\n                                href=\"./Register.php\" style=\"padding: 10px;\">Register</a>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"u-custom-menu u-nav-container-collapse\">\n                    <div class=\"u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav\">\n                        <div class=\"u-inner-container-layout u-sidenav-overflow\">\n                            <div class=\"u-menu-close\"></div>\n                            <ul class=\"u-align-center u-nav u-popupmenu-items u-spacing-23 u-unstyled u-nav-2\">\n                                <li class=\"u-nav-item\"><a class=\"u-button-style u-nav-link\" href=\"../index.php\"\n                                        style=\"padding-top: 22px; padding-bottom: 22px;\">Home</a>\n                                </li>\n                                <li class=\"u-nav-item\"><a class=\"u-button-style u-nav-link\" href=\"./Appointment.php\"\n                                        style=\"padding-top: 22px; padding-bottom: 22px;\">Appointment</a>\n                                </li>\n                                <li class=\"u-nav-item\"><a class=\"u-button-style u-nav-link\" href=\"./Schedule.php\"\n                                        style=\"padding-top: 22px; padding-bottom: 22px;\">Schedule</a>\n                                </li>\n                                <li class=\"u-nav-item\"><a class=\"u-button-style u-nav-link\" href=\"./Log-in.php\"\n                                        style=\"padding-top: 22px; padding-bottom: 22px;\">Log in</a>\n                                </li>\n                                <li class=\"u-nav-item\"><a class=\"u-button-style u-nav-link\" href=\"./Register.php\"\n                                        style=\"padding-top: 22px; padding-bottom: 22px;\">Register</a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div class=\"u-black u-menu-overlay u-opacity u-opacity-70\"></div>\n                </div>\n            </nav>\n            <a class=\"u-image u-logo u-image-1\" data-image-width=\"618\" data-image-height=\"58\">\n                <img src=\"../images/logo.png\" class=\"u-logo-image u-logo-image-1\">\n            </a>\n            <nav class=\"u-hidden-md u-hidden-sm u-hidden-xs u-menu u-menu-one-level u-offcanvas u-menu-2\">\n                <div class=\"menu-collapse\" style=\"font-size: 2.25rem; letter-spacing: 0px; font-weight: 700;\">\n                    <a class=\"u-button-style u-custom-border u-custom-border-color u-custom-borders u-custom-left-right-menu-spacing u-custom-text-active-color u-custom-text-color u-custom-text-hover-color u-custom-top-bottom-menu-spacing u-nav-link\"\n                        href=\"#\">\n                        <svg class=\"u-svg-link\" viewBox=\"0 0 24 24\">\n                            <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#svg-1bf5\"></use>\n                        </svg>\n                        <svg class=\"u-svg-content\" version=\"1.1\" id=\"svg-1bf5\" viewBox=\"0 0 16 16\" x=\"0px\" y=\"0px\"\n                            xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <g>\n                                <rect y=\"1\" width=\"16\" height=\"2\"></rect>\n                                <rect y=\"7\" width=\"16\" height=\"2\"></rect>\n                                <rect y=\"13\" width=\"16\" height=\"2\"></rect>\n                            </g>\n                        </svg>\n                    </a>\n                </div>\n                <div class=\"u-nav-container\">\n                    <ul class=\"u-nav u-spacing-10 u-unstyled u-nav-3\">\n                        <li class=\"u-nav-item\"><a\n                                class=\"u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-palette-2-base\"\n                                href=\"../index.php\" style=\"padding: 26px 34px;\">Home</a>\n                        </li>\n                        <li class=\"u-nav-item\"><a\n                                class=\"u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-palette-2-base\"\n                                href=\"./Appointment.php\" style=\"padding: 26px 34px;\">Appointment</a>\n                        </li>\n                        <li class=\"u-nav-item\"><a\n                                class=\"u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-palette-2-base\"\n                                href=\"./Schedule.php\" style=\"padding: 26px 34px;\">Schedule</a>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"u-nav-container-collapse\">\n                    <div class=\"u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav\">\n                        <div class=\"u-inner-container-layout u-sidenav-overflow\">\n                            <div class=\"u-menu-close\"></div>\n                            <ul class=\"u-align-center u-nav u-popupmenu-items u-unstyled u-nav-4\">\n                                <li class=\"u-nav-item\"><a class=\"u-button-style u-nav-link\"\n                                        href=\"../index.php\">Home</a>\n                                </li>\n                                <li class=\"u-nav-item\"><a class=\"u-button-style u-nav-link\"\n                                        href=\"./Appointment.php\">Appointment</a>\n                                </li>\n                                <li class=\"u-nav-item\"><a class=\"u-button-style u-nav-link\"\n                                        href=\"./Schedule.php\">Schedule</a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div class=\"u-black u-menu-overlay u-opacity u-opacity-70\"></div>\n                </div>\n            </nav><span class=\"u-file-icon u-hidden-md u-hidden-sm u-hidden-xs u-hover-feature u-icon u-icon-1\"\n                data-href=\"./Log-in.php\" title=\"Log-in\"><img src=\"../images/login.png\" alt=\"\"></span>\n        </div>\n    </header>\n    <!-- end of Header(logo, menu) -->\n    <section class=\"u-clearfix u-palette-1-light-2 u-section-1\" id=\"sec-4761\">\n        <div class=\"u-clearfix u-sheet u-sheet-1\">\n            <div class=\"u-expanded-width-xs u-form u-form-1\">\n                <form action=\"Register.php\" method=\"POST\"\n                    class=\"u-clearfix u-form-spacing-10 u-form-vertical u-inner-form\" style=\"padding: 10px;\">\n                    <div class=\"u-form-group u-form-name u-form-partition-factor-3 u-form-group-1\">\n                        <label for=\"name-5d55\" class=\"u-label u-label-1\">First Name</label>\n                        <input type=\"text\" placeholder=\"Enter your First Name\" id=\"name-5d55\" name=\"firstName\"\n                            class=\"u-input u-input-rectangle\" required=\"required\" maxlength=\"50\">\n                    </div>\n                    <div class=\"u-form-group u-form-name u-form-partition-factor-3\">\n                        <label for=\"name-c3f6\" class=\"u-label u-label-2\">Middle Name</label>\n                        <input type=\"text\" placeholder=\"Enter your Middle Name\" id=\"name-c3f6\" name=\"middleName\"\n                            class=\"u-input u-input-rectangle\" maxlength=\"50\">\n                    </div>\n                    <div class=\"u-form-group u-form-name u-form-partition-factor-3 u-form-group-3\">\n                        <label for=\"name-5d55\" class=\"u-label u-label-3\">Last Name</label>\n                        <input type=\"text\" placeholder=\"Enter your Last Name\" id=\"name-5d55\" name=\"lastName\"\n                            class=\"u-input u-input-rectangle\" required=\"required\" maxlength=\"50\">\n                    </div>\n                    <div class=\"u-form-date u-form-group u-form-partition-factor-2 u-form-group-4\">\n                        <label for=\"date-0d5d\" class=\"u-label u-label-4\">Date</label>\n                        <input type=\"text\" readonly=\"readonly\" placeholder=\"MM/DD/YYYY\" id=\"mobi-picker\" mbsc-input\n                            name=\"date\" class=\"u-input u-input-rectangle\" required=\"required\"\n                            data-date-format=\"mm/dd/yyyy\">\n                    </div>\n                    <div class=\"u-form-group u-form-partition-factor-2 u-form-phone u-form-group-5\">\n                        <label for=\"phone-60b5\" class=\"u-label u-label-5\">Phone</label>\n                        <input type=\"tel\"\n                            pattern=\"\\+?\\d{0,3}[\\s\\(\\-]?([0-9]{2,3})[\\s\\)\\-]?([\\s\\-]?)([0-9]{3})[\\s\\-]?([0-9]{2})[\\s\\-]?([0-9]{2})\"\n                            placeholder=\"Enter your phone (e.g. +14155552675)\" id=\"phone-60b5\" name=\"phone\"\n                            class=\"u-input u-input-rectangle\" required=\"required\" maxlength=\"13\">\n                    </div>\n                    <div class=\"u-form-email u-form-group\">\n                        <label for=\"email-c3f6\" class=\"u-label u-label-6\">Email</label>\n                        <input type=\"email\" placeholder=\"Enter a valid email address\" id=\"email-c3f6\" name=\"email\"\n                            class=\"u-input u-input-rectangle\" required=\"required\" maxlength=\"50\">\n                    </div>\n                    <div class=\"u-form-group u-form-group-7\">\n                        <label for=\"text-9a81\" class=\"u-label u-label-7\">Username</label>\n                        <input type=\"text\" placeholder=\"Enter your username\" id=\"text-9a81\" name=\"username\"\n                            class=\"u-input u-input-rectangle\" required=\"required\" autofocus=\"autofocus\" maxlength=\"30\">\n                    </div>\n                    <div class=\"u-align-center u-form-group u-form-submit\">\n                        <input type=\"submit\" name=\"submit\" value=\"submit\"\n                            class=\"u-btn u-btn-submit u-button-style u-btn-1\"></input>\n                        <!-- <button type=\"submit\" value=\"submit\" class=\"u-form-control-hidden\"> -->\n                    </div>\n                    <!-- <div class=\"u-form-send-message u-form-send-success\"> Thank you! Your message has been sent. </div>\n            <div class=\"u-form-send-error u-form-send-message\"> Unable to send your message. Please fix errors then try again. </div>\n            <input type=\"hidden\" value=\"\" name=\"recaptchaResponse\">\n            <input type=\"hidden\" name=\"formServices\" value=\"f17955a7f1153ba96391842d887bc1e8\"> -->\n                </form>\n            </div>\n        </div>\n    </section>\n\n    <footer class=\"u-align-center u-clearfix u-footer u-grey-80 u-footer\" id=\"sec-5b62\">\n        <div class=\"u-clearfix u-sheet u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-sheet-1\">\n            <p class=\"u-small-text u-text u-text-variant u-text-1\">Sample text. Click to select the Text Element.</p>\n        </div>\n    </footer>\n    <section class=\"u-backlink u-clearfix u-grey-80\">\n        <span>Website Templates</span>\n        </a>\n        <p class=\"u-text\">\n            <span>created with</span>\n        </p>\n        <a class=\"u-link\" href=\"\" target=\"_blank\">\n            <span>Website Builder Software</span>\n        </a>.\n    </section>\n\n</body>\n<?php\n  if(isset($_POST[\"submit\"])) {\n\n    mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\n    // Create connection\n    $mysqli = new mysqli(\"localhost\",\"root\",\"hsuanmacair\",\"oms\", 3306);\n\n    // Check connection\n    if ($mysqli -> connect_errno) {\n      echo \"Failed to connect to MySQL: \" . $mysqli -> connect_error;\n      exit();\n    }\n\n    $firstName = $_POST['firstName'];\n    $middleName = $_POST['middleName'];\n    $lastName = $_POST['lastName'];\n    $phone = $_POST['phone'];\n    $email = $_POST['email'];\n    $userName = $_POST['username'];\n\n    $success_id = 0;\n    // 0 = default\n    // 1 = sucess, redirect to Login\n    // 2 = already signed up\n    // 3 = username is taken\n    // 4 = password doesn't match\n    // 5 = something went wrong\n\n\n    $existcheck = $mysqli->query(\"SELECT `phone` FROM (SELECT DISTINCT `phone` FROM Paccount UNION SELECT DISTINCT `phone` FROM Daccount) AS users WHERE `phone` = '{$phone}';\");\n    // $check = $existcheck -> num_rows;\n    echo \"<script>alert('{$middleName}.{$lastName}')</script>\";\n    // checking if account exists\n    if ($existcheck -> num_rows < 1){\n\n      //checking if username is taken\n      $usercheck = $mysqli->query(\"SELECT `userName` FROM (SELECT DISTINCT `userName` FROM Paccount UNION SELECT DISTINCT `userName` FROM Daccount) AS users WHERE `userName` = '{$userName}';\");\n      // $check = $usercheck -> num_rows;\n      // echo \"<script>alert('{$check}')</script>\";\n      if ($usercheck -> num_rows < 1){\n        // checking if passwords match\n        if (strcmp($passwd, $confpasswd) == 0){\n          echo \"<script>alert(check correct)</script>\";\n\n          $sql = \"INSERT INTO Paccount (`PID`, `firstName`, `middleName`, `lastName`, `phone`, `email`)\n                  VALUES ('', '{$firstName}', '{$middleName}', '{$lastName}', '{$phone}', '{$email}');\";\n          $result = $mysqli->query($sql);\n          // checking to see if sign up is complete\n          if ($result) {\n            $success_id = 1; // successful signup\n          } else {\n            $success_id = 5; // something went wrong\n            echo \"<script>alert('Oops! Something went wrong, please check again or contact us!')</script>\";\n          }\n        } else {\n          $success_id = 4;\n          echo \"<script>alert('Two password doesn't match!')</script>\";\n        }\n      } else {\n        $success_id = 3;\n        echo \"<script>alert('Phone number already exists!')</script>\";\n      }\n    } else {\n      $success_id = 2;\n      echo \"<script>alert('Username already exists!')</script>\";\n    }\n    // echo \"<script>alert('{$success_id}')</script>\";\n    header(\"Location: ../User/Register.php?success_id=\" . $success_id . \"\");\n\n    $conn->close();\n}\n?>\n\n</html>"
        }
    ]
}